---
prev: /guide/
next: ./getting-started.md
---

# Введение

Telegram-бот — это специальный аккаунт, который управляется программой.
Любой желающий может создать Telegram-бота, нужно лишь уметь программировать немного.

> Если уже знаешь, как создавать ботов, тогда [вперёд](./getting-started.md)!

grammY — это библиотека, с которой написание такого бота становится тривиальной задачей.

## Как написать бота

Перед тем как писать бота, убедись, что ты знаешь, что Telegram-боты могут и не могут делать.
Команда Telegram подготовила отличный гайд для этого — [Введение для Разработчиков](https://core.telegram.org/bots).

При написании Telegram-бота ты создашь текстовый файл с исходным кодом твоего бота.
(Можешь, кстати, скопировать какой-нибудь из наших примеров.)
Он определяет, _что конкретно твой бот делает_, то есть "когда пользователь отправляет это сообщение, ответь вот так", и так далее.

Затем можешь запустить этот исходник.
Твой бот будет работать, пока ты его не остановишь.

В целом это всё…

## Как держать бота запущенным

…если только бот — не серьёзный проект.
Если ты остановишь бота (или выключишь компьютер), твой бот перестанет отвечать на сообщения.

> Пропускай эту главу, если хочешь просто поиграться с ботами, и [переходи к требованиям](#%D0%BF%D1%80%D0%B5%D0%B6%D0%B4%D0%B5-%D1%87%D0%B5%D0%BC-%D0%BD%D0%B0%D1%87%D0%B0%D1%82%D1%8C), чтобы начать.

Проще говоря, если ты хочешь, чтобы бот был постоянно онлайн, тебе придётся держать компьютер включённым 24/7.
Скорее всего, ты не хочешь делать это со своим ноутбуком, поэтому тебе нужно загрузить свой код на машины _хостинг-провайдера_ (другими словами, на чужой компьютер, также известный как _сервер_), и дать этим людям запустить его за тебя.

Есть бесчисленное количество компаний, которые позволяют запускать твоего Telegram-бота бесплатно.
Эта документация охватывает ряд различных хостинг-провайдеров, которые хорошо работают с grammY (см. раздел ["Хостинг"](../hosting/comparison.md)).
В конечном итоге выбор провайдера остается за тобой.
Помни, что запуск твоего кода в другом месте означает, что тот, кто владеет этим "местом", имеет доступ ко всем твоим сообщениям и данным пользователей, поэтому выбирай провайдера, которому ты можешь доверять.

Ниже приведена (упрощённая) диаграмма, того, как всё будет выглядеть в итоге, когда Алиса напишет твоему боту:

```asciiart:no-line-numbers
_________     написала      ____________                   ____________
| Алиса | —> твоему боту —> | Telegram | —> HTTP запрос —> | твой бот |
—————————    в Telegram     ————————————                   ————————————

 телефон                  сервера Telegram                 твой ноутбук,
                                                           лучше: сервер


|_______________________________________|                  |___________|
                   |                                             |
        ответственность Telegram                       твоя ответственность
```

Аналогично, твой бот может делать HTTP-запросы к серверам Telegram, чтобы отправлять сообщения обратно Алисе.
(Если никогда не слышал об HTTP, то пока можете считать, что это пакеты данных, которые передаются через интернет.)

## Что grammY делает за тебя

Боты взаимодействуют с Telegram через HTTP-запросы.
Каждый раз, когда твой бот отправляет или получает сообщения, HTTP-запросы ходят туда-сюда между серверами Telegram и твоим сервером/компьютером.

По своей сути, grammY реализует все это общение за тебя, поэтому ты можешь просто написать `sendMessage` в своём коде, и сообщение будет отправлено.
Кроме того, есть множество других полезных вещей, которые делает grammY, чтобы упростить создание твоего бота.
Узнаешь всё по ходу дела.

## Прежде чем начать

> Если ты уже знаешь как разрабатывать приложения на Deno или Node.js, пропускай оставшуюся часть страницы и [начинай](./getting-started.md).

Забавный факт о программировании — важные вещи редко объясняются, потому что большинство разработчиков считают, что они очевидны.

В следующей главе ты создашь бота, написав текстовый файл, который будет содержать исходный код на языке программирования [TypeScript](https://www.typescriptlang.org/docs/handbook/typescript-from-scratch.html).
Документация grammY не будет учить тебя программированию, поэтому мы ожидаем, что ты научишься этому сам.
Но запомни: создание Telegram-бота с grammY — хороший способ научиться кодить! :rocket:

::: tip Учимся программировать
Ты можешь начать учить TypeScript по [официальному туториалу](https://www.typescriptlang.org/docs/handbook/typescript-from-scratch.html), написанному командой TypeScript, и затем продолжить отсюда.
Потрать не больше 30 минут на чтение информации в Интернете, возвращайся сюда (прочитай оставшуюся часть раздела) и [приступай к работе](./getting-started.md).

Если увидишь незнакомый синтаксис в документации, или возникнет какая-то ошибка, которую ты не понимаешь, загугли решение — объяснение уже есть в Интернете (на StackOverflow, например).
:::

::: danger Не учимся программировать
Сохрани себе немного времени, посмотрев это [34-секундное видео](https://youtu.be/8RtGlWmXGhA).
:::

Выбрав grammY, ты уже выбрал язык программирования, то есть TypeScript.
Но что должно произойти, после того как ты написал свой TypeScript код, как его запустить?
Для этого тебе нужно установить какой-нибудь софт, который сможет _исполнять_ твой код.
Такой тип софта называется _средой выполнения_.
Он берёт твои файлы с исходным кодом и фактически выполняет всё, что в них написано.

У нас есть два варианта среды исполнения: [Deno](https://deno.land/) и [Node.js](https://nodejs.org/ru/).
(Если знаешь кого-то, кто называет это _нодой_, значит ему просто лень добавить ".js", но он имеет в виду то же самое.)

> Оставшаяся часть этой главы поможет тебе выбрать одну из этих двух платформ.
> Если ты уже знаешь, что будешь использовать, переходи к [требованиям для Node.js](#%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D0%B4%D0%BB%D1%8F-node-js) или [для Deno](#%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D0%B4%D0%BB%D1%8F-deno).

Node.js — это более старая, более зрелая технология.
Если тебе нужно подключиться к необычной базе данных или сделать другие низкоуровневые штуки, вероятность того, что у тебя это получится с помощью Node.js, чрезвычайно высока.
Deno относительно новый, поэтому иногда может оказаться так, что у него нет возможности сделать какие-то продвинутые вещи.
Сегодня большинство серверов используют Node.js.

С другой стороны, Deno значительно проще выучить и использовать.
Если у тебя ещё нет большого опыта в программировании, **имеет смысл начать с Deno**.

Даже если ты уже писал код под Node.js, тебе следует дать Deno шанс.
Многие вещи, которые сложно сделать в Node.js, не требуют особых усилий в Deno.
Deno

- гораздо проще установить,
- не требует ничего настраивать в проекте,
- использует гораздо меньше пространства на диске,
- обладает превосходными встроенными инструментами разработки и отличной интеграцией с редакторами кода,
- гораздо безопаснее, и
- имеет ещё кучу достоинств, которые не влезают сюда.

Разрабатывать под Deno намного приятнее.
По крайней мере, таково наше мнение.

Но если у тебя есть причина использовать Node.js, например, если ты уже хорошо с ней знаком, то ничего страшного.
Мы следим за тем, чтобы grammY работал одинаково хорошо на обеих платформах, и при этом не срезаем углы.
Выбирай то, что считаешь нужным.

### Требования для Deno

Перед тем как ты начнёшь создавать своего бота, давай сначала потратим несколько минут на правильную настройку среды разработки.
Это значит, нужно кое-что установить.

#### Подготовка твоего ПК к разработке

[Установи Deno](https://deno.land/manual/getting_started/installation#download-and-install), если всё ещё не сделал этого.

Тебе также потребуется текстовый редактор, который подойдёт для программирования.
Самый лучше под Deno — это Visual Studio Code, или просто VS Code.
[Установи его.](https://code.visualstudio.com/)

Далее тебе нужно соединить VS Code и Deno.
Это очень просто: уже есть готовое расширение, которое сделает всё автоматически.
Ты можешь установить его, [как описано здесь](https://marketplace.visualstudio.com/items?itemName=denoland.vscode-deno).

Твоя система теперь готова к разработке бота! :tada:

#### Разработка бота

Создай новую директорию где-нибудь.
В ней будет лежать твой проект.
Открой эту новую директорию в VS Code.

```sh
mkdir ./my-bot
cd ./my-bot
code .
```

> Если ты на macOS и команда `code` недоступна, просто открой VS Code, нажми `Cmd+Shift+P`, введи "shell command" и нажми `Enter`.

В VS Code сделай из этой пустой директории Deno проект.
Нажми `Ctrl+Shift+P`, введи "deno init" и нажми `Enter`.
В правом нижнем углу должна появиться надпись с версией Deno, которую ты установил.

Cреда разработки Deno готова.
Теперь можешь начинать писать своего бота.
Это объясняется на следующей странице.

И последнее:
После того, как ты создашь своего бота, например, в файле `bot.ts`, можешь запустить его, выполнив команду `deno run --allow-net bot.ts` в терминале.
(Да, писать софт значит часто использовать терминал — привыкай.)
Ты можешь остановить бота, нажав `Ctrl+C`.

Готов?
[Вперёд](./getting-started.md#TODO-update-me)! :robot:

### Требования для Node.js

Ты собираешься писать своего бота на TypeScript, но, в отличие от Deno, Node.js не умеет исполнять TypeScript.
Вместо этого, создав исходный файл (например, `bot.ts`), тебе нужно _скомпилировать_ его в JavaScript.
После этого у тебя будет два файла: оригинальный `bot.ts` и сгенерированный `bot.js`, который в свою очередь может быть запущен на Node.js.
Конкретные команды для всего этого будут представлены в следующем разделе, когда ты создашь бота, просто важно знать, что эти шаги необходимы.

Чтобы запустить файл `bot.js`, нужно установить [Node.js](https://nodejs.org/ru/).

В общем, вот что нужно сделать для Node.js:

1. Создать исходный файл `bot.ts` с TypeScript кодом, например, используя [VS Code](https://code.visualstudio.com/) (или любой другой редактор).
2. Скомпилировать код, выполнив команду в терминале, которая сгенерирует файл `bot.js`.
3. Запустить `bot.js`, используя Node.js, снова из терминала.

Каждый раз, когда ты изменишь код в `bot.ts`, тебе нужно будет перезапустить процесс Node.js.
Нажми `Ctrl+C` в терминале, чтобы остановить процесс.
Так ты остановишь своего бота.
Затем необходимо повторить шаги 2 и 3.

::: tip Стоп, что?

Установка Node.js и правильная настройка всего занимает много времени.
Если раньше никогда не занимался всем этим, то будь готов к тому, что ты столкнёшься с кучей непонятный проблем, которые трудно решить.
Вот почему мы ожидаем, что ты знаешь, как всё настроить, или что ты способен научиться.
(Только установка Node.js _правильным способом_ настолько сложна, что не войдёт на эту страницу.)

Если чувствуешь себя потерянным на этом этапе, лучше пока оставить Node.js в сторонке и вместо этого использовать [Deno](#%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D0%B4%D0%BB%D1%8F-deno).

:::

Всё ещё уверен?
Отлично!
[Приступаем](./getting-started.md#getting-started-on-node-js)! :robot:
